{
  "collections": {
    "users": {
      "description": "User profiles (REST via Firestore Lite)",
      "document": {
        "id": "uid (from Firebase Auth)",
        "fields": {
          "uid": { "type": "string", "required": true },
          "email": { "type": "string", "required": true },
          "displayName": { "type": "string", "required": true },
          "photoURL": { "type": "string", "required": false },
          "provider": { "type": "string", "enum": ["email", "google", "github"], "required": true },
          "profile": {
            "type": "object",
            "fields": {
              "fullName": { "type": "string" },
              "firstName": { "type": "string" },
              "lastName": { "type": "string" }
            }
          },
          "preferences": {
            "type": "object",
            "fields": {
              "theme": { "type": "string", "enum": ["system", "light", "dark"], "default": "system" }
            }
          },
          "metadata": {
            "type": "object",
            "fields": {
              "createdAt": { "type": "timestamp" },
              "updatedAt": { "type": "timestamp" },
              "lastLogin": { "type": "timestamp" },
              "isActive": { "type": "boolean", "default": true },
              "accountStatus": { "type": "string", "enum": ["active", "suspended", "deleted"], "default": "active" }
            }
          }
        }
      }
    },
    "tasks": {
      "description": "MVP Tasks for a single-user workspace",
      "document": {
        "id": "taskId (auto)",
        "fields": {
          "ownerId": { "type": "string", "required": true },
          "title": { "type": "string", "required": true },
          "description": { "type": "string", "required": false },
          "status": { "type": "string", "enum": ["todo", "in_progress", "done"], "default": "todo" },
          "priority": { "type": "string", "enum": ["low", "medium", "high"], "default": "medium" },
          "position": { "type": "number", "required": true, "description": "client-side ordering" },
          "createdAt": { "type": "timestamp" },
          "updatedAt": { "type": "timestamp" }
        }
      },
      "indexes": []
    }
  },
  "securityRules": {
    "description": "Current simplified rules in production",
    "rules": "rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /users/{uid} {\n      allow create: if request.auth != null && request.auth.uid == uid;\n      allow read, update, delete: if request.auth != null && request.auth.uid == uid;\n    }\n    match /tasks/{taskId} {\n      allow create: if request.auth != null && request.resource.data.ownerId == request.auth.uid;\n      allow read, update, delete: if request.auth != null && resource.data.ownerId == request.auth.uid;\n    }\n  }\n}"
  }
}
